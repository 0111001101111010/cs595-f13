<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" lang="en">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="en">
<!--<![endif]-->
<!--
	generated 242 seconds ago
	generated in 0.338 seconds
	served from batcache in 0.003 seconds
	expires in 58 seconds
-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Gotcha &mdash; Mutable default arguments | Python Conquers The Universe</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="https://s2.wp.com/wp-content/themes/pub/twentyeleven/style.css" />
<link rel="pingback" href="http://pythonconquerstheuniverse.wordpress.com/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="https://s2.wp.com/wp-content/themes/pub/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->
<meta name="google-site-verification" content="20kUf4sIlFFHFlkLSm4URLm6SsgHOj23db03npkjWnA" />
<link rel="alternate" type="application/rss+xml" title="Python Conquers The Universe &raquo; Feed" href="https://pythonconquerstheuniverse.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Python Conquers The Universe &raquo; Comments Feed" href="https://pythonconquerstheuniverse.wordpress.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Python Conquers The Universe &raquo; Gotcha &mdash; Mutable default&nbsp;arguments Comments Feed" href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/feed/" />
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel='stylesheet' id='all-css-0' href='https://s1.wp.com/_static/??-eJx1zsEOwiAMgOEXErvpjPFgfJbBKmMrlEiR7O1FPbhk8djm+9NCicpwEAwCPqtI2bqQgNyMCSaU2JtZfaa9SWkHK66J7S9ga3HgLOrORFyguMGibKLVjcipaurdA5IshBsrI/r6RcwapNTFgoRPDF+tSjTs/zVjB5ZY9/QGN39tj+fLqemaQzu9AKhfWf8=' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script>
<script type='text/javascript' src='https://s2.wp.com/_static/??-eJyFkN0KwjAMRl/IrviDxQvxWbYuK6ltU5vWMZ/eDiYoDnaVkBxy+CLHKDSFDCFLy9JThw5EYUitqTOBYaDG8k5WDoN2pQeeQfsokKalbALCo0lthsZj+MBf1kicPTBX5cr2V4XhiTBuYhZybPVdJGB8/V3tHBkRXTEYWNbeQE8li4Gco1GO2BvIa6E0eT9/JUF00xLm5q/7o1KHs7qok30DqLN9jA=='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://pythonconquerstheuniverse.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://pythonconquerstheuniverse.wordpress.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Backing up your&nbsp;email' href='https://pythonconquerstheuniverse.wordpress.com/2012/02/13/backing-up-your-email/' />
<link rel='next' title='Python&#8217;s magic&nbsp;methods' href='https://pythonconquerstheuniverse.wordpress.com/2012/03/09/pythons-magic-methods/' />
<meta name="generator" content="WordPress.com" />
<link rel='canonical' href='https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/' />
<link rel='shortlink' href='http://wp.me/pCHyo-oU' />
<link rel="alternate" type="application/json+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=json&amp;url=https%3A%2F%2Fpythonconquerstheuniverse.wordpress.com%2F2012%2F02%2F15%2Fmutable-default-arguments%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=xml&amp;url=https%3A%2F%2Fpythonconquerstheuniverse.wordpress.com%2F2012%2F02%2F15%2Fmutable-default-arguments%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Gotcha &mdash; Mutable default arguments" />
<meta property="og:url" content="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/" />
<meta property="og:description" content="Goto start of series Note: examples are coded in Python 2.x, but the basic point of the post applies to all versions of Python. There&#039;s a Python gotcha that bites everybody as they learn Python. In..." />
<meta property="og:site_name" content="Python Conquers The Universe" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="@wordpressdotcom" />
<meta property="fb:app_id" content="249643311490" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />
<link rel="shortcut icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon-precomposed" href="https://s0.wp.com/i/webclip.png" />
<link rel='openid.server' href='http://pythonconquerstheuniverse.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='http://pythonconquerstheuniverse.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://pythonconquerstheuniverse.wordpress.com/osd.xml" title="Python Conquers The Universe" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com" />
		<style>
		/* <![CDATA[ */
		/* Block: reblog */
		
		.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
		.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
		.reblogger-note-content            { margin: 0 0 20px; }
		.reblog-post .wpcom-enhanced-excerpt-content { border-left: 3px solid #eee; padding-left: 15px; }
		.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
		.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
		.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
		.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }
		
		.reblog-post .wpcom-enhanced-excerpt { clear: both; }
		
		.reblog-post .wpcom-enhanced-excerpt address,
		.reblog-post .wpcom-enhanced-excerpt li,
		.reblog-post .wpcom-enhanced-excerpt h1,
		.reblog-post .wpcom-enhanced-excerpt h2,
		.reblog-post .wpcom-enhanced-excerpt h3,
		.reblog-post .wpcom-enhanced-excerpt h4,
		.reblog-post .wpcom-enhanced-excerpt h5,
		.reblog-post .wpcom-enhanced-excerpt h6,
		.reblog-post .wpcom-enhanced-excerpt p { font-size: 100% !important; }
		
		.reblog-post .wpcom-enhanced-excerpt blockquote,
		.reblog-post .wpcom-enhanced-excerpt pre,
		.reblog-post .wpcom-enhanced-excerpt code,
		.reblog-post .wpcom-enhanced-excerpt q { font-size: 98% !important; }
		

		/* ]]> */
		</style>
		<meta name="application-name" content="Python Conquers The Universe" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Adventures across space and time with the Python programming language" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://pythonconquerstheuniverse.wordpress.com/feed/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="title" content="Gotcha &mdash; Mutable default&nbsp;arguments | Python Conquers The Universe on WordPress.com" />
<meta name="description" content="Goto start of series Note: examples are coded in Python 2.x, but the basic point of the post applies to all versions of Python. There&#039;s a Python gotcha that bites everybody as they learn Python. In fact, I think it was Tim Peters who suggested that every programmer gets caught by it exactly two times.&hellip;" />

<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'>
</script>
<script type='text/javascript'>
if ( typeof GS_googleAddAdSenseService == 'function' ) { GS_googleAddAdSenseService("ca-pub-3443918307802676"); }
if ( typeof GS_googleEnableAllServices == 'function' ) { GS_googleEnableAllServices() };
</script>
<script type='text/javascript'>
if ( typeof GA_googleAddSlot == 'function' ) { GA_googleAddSlot("ca-pub-3443918307802676", "wpcom_below_post_adsafe"); }
</script>
<script type='text/javascript'>
if ( typeof GA_googleFetchAds == 'function' ) { GA_googleFetchAds(); }
</script>

<script type="text/javascript">
var wpcom_ads = { bid: 9223888, pt: 'permalink', wa: 0, as: 1, domain: 'pythonconquerstheuniverse.wordpress.com', url: 'https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/', gid: '', };
</script>
<style id="syntaxhighlighteranchor"></style>
<script type="text/javascript"> 
	window.google_analytics_uacct = "UA-52447-2"; 
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_setDomainName', 'wordpress.com']);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script>
</head>

<body class="single single-post postid-1544 single-format-standard single-author singular two-column right-sidebar mp6 highlander-enabled highlander-light">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><span><a href="https://pythonconquerstheuniverse.wordpress.com/" title="Python Conquers The Universe" rel="home">Python Conquers The Universe</a></span></h1>
				<h2 id="site-description">Adventures across space and time with the Python programming language</h2>
			</hgroup>

						<a href="https://pythonconquerstheuniverse.wordpress.com/">
									<img src="https://pythonconquerstheuniverse.wordpress.com/wp-content/themes/pub/twentyeleven/images/headers/shore.jpg?m=1354160568g" width="1000" height="288" alt="" />
							</a>
			
								<form method="get" id="searchform" action="https://pythonconquerstheuniverse.wordpress.com/">
		<label for="s" class="assistive-text">Search</label>
		<input type="text" class="field" name="s" id="s" placeholder="Search" />
		<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search" />
	</form>
			
			<nav id="access" role="navigation">
				<h3 class="assistive-text">Main menu</h3>
								<div class="skip-link"><a class="assistive-text" href="#content" title="Skip to primary content">Skip to primary content</a></div>
				<div class="skip-link"><a class="assistive-text" href="#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
								<div class="menu"><ul><li ><a href="https://pythonconquerstheuniverse.wordpress.com/" title="Home">Home</a></li></ul></div>
			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">Post navigation</h3>
						<span class="nav-previous"><a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/13/backing-up-your-email/" rel="prev"><span class="meta-nav">&larr;</span> Previous</a></span>
						<span class="nav-next"><a href="https://pythonconquerstheuniverse.wordpress.com/2012/03/09/pythons-magic-methods/" rel="next">Next <span class="meta-nav">&rarr;</span></a></span>
					</nav><!-- #nav-single -->

					
<article id="post-1544" class="post-1544 post type-post status-publish format-standard hentry category-python-gotchas">
	<header class="entry-header">
		<h1 class="entry-title">Gotcha &mdash; Mutable default&nbsp;arguments</h1>

				<div class="entry-meta">
						<span class="sep">Posted on </span><a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/" title="3:04 am" rel="bookmark"><time class="entry-date" datetime="2012-02-15T03:04:24+00:00">2012/02/15</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="https://pythonconquerstheuniverse.wordpress.com/author/stephenferg/" title="View all posts by Steve Ferg" rel="author">Steve Ferg</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p><a href="http://pythonconquerstheuniverse.wordpress.com/2008/06/04/python-gotchas/">Goto start of series</a></p>
<p><em>Note: examples are coded in Python 2.x, but the basic point of the post applies to all versions of Python.</em></p>
<p>There&#8217;s a Python gotcha that bites everybody as they learn Python. In fact, I think it was Tim Peters who suggested that every programmer gets caught by it exactly two times. It is call the <em>mutable defaults</em> trap. Programmers are usually bit by the mutable defaults trap when coding class methods, but I&#8217;d like to begin with explaining it in functions, and then move on to talk about class methods.</p>
<p><strong>Mutable defaults for function arguments</strong></p>
<p>The gotcha occurs when you are coding default values for the arguments to a function or a method. Here is an example for a function named <tt>foobar</tt>:</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">
def foobar(arg_string = &quot;abc&quot;, arg_list = []):
    ...
</pre>
<p>Here&#8217;s what most beginning Python programmers believe will happen when <tt>foobar</tt> is called without any arguments:</p>
<blockquote><p>A new string object containing &#8220;abc&#8221; will be created and bound to the &#8220;arg_string&#8221; variable name. A new, empty list object will be created and bound to the &#8220;arg_list&#8221; variable name. In short, if the arguments are omitted by the caller, the <tt>foobar</tt> will always get &#8220;abc&#8221; and [] in its arguments.</p></blockquote>
<p>This, however, is <em>not</em> what will happen. Here&#8217;s why.</p>
<p>The objects that provide the default values are not created at the time that <tt>foobar</tt> is called. They are created <em>at the time that the statement that defines the function is executed</em>. (See the discussion at <a href="http://www.deadlybloodyserious.com/2008/05/default-argument-blunders/" target="_blank">Default arguments in Python: two easy blunders</a>: &#8220;Expressions in default arguments are calculated when the function is defined, <em>not</em> when it’s called.&#8221;)</p>
<p>If <tt>foobar</tt>, for example, is contained in a module named <tt>foo_module</tt>, then the statement that defines <tt>foobar</tt> will probably be executed at the time when <tt>foo_module</tt> is imported.</p>
<p>When the <tt>def</tt> statement that creates <tt>foobar</tt> is executed:</p>
<ul>
<li>A new function object is created, bound to the name <tt>foobar</tt>, and stored in the namespace of <tt>foo_module</tt>.</li>
<li>Within the <tt>foobar</tt> function object, for each argument with a default value, an object is created to hold the default object. In the case of <tt>foobar</tt>, a string object containing &#8220;abc&#8221; is created as the default for the <tt>arg_string</tt> argument, and an empty list object is ccreated as the default for the <tt>arg_list</tt> argument.</li>
</ul>
<p>After that, whenever <tt>foobar</tt> is called without arguments, <tt>arg_string</tt> will be bound to the default string object, and arg_list will be bound to the default list object. In such a case, <tt>arg_string</tt> will always be &#8220;abc&#8221;, but <tt>arg_list</tt> may or may not be an empty list. Here&#8217;s why.</p>
<p>There is a crucial difference between a string object and a list object. A string object is immutable, whereas a list object is mutable. That means that the default for <tt>arg_string</tt> can never be changed, but the default for <tt>arg_list</tt> can be changed.</p>
<p>Let&#8217;s see how the default for arg_list can be changed. Here is a program. It invokes <tt>foobar</tt> four times. Each time that <tt>foobar</tt> is invoked it displays the values of the arguments that it receives, then adds something to each of the arguments.</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">
def foobar(arg_string=&quot;abc&quot;, arg_list = []): 
    print arg_string, arg_list 
    arg_string = arg_string + &quot;xyz&quot; 
    arg_list.append(&quot;F&quot;)

for i in range(4): 
    foobar()
</pre>
<p>The output of this program is:</p>
<pre class="brush: plain; collapse: false; title: ; wrap-lines: false; notranslate" title="">
abc [] 
abc ['F'] 
abc ['F', 'F'] 
abc ['F', 'F', 'F']
</pre>
<p>As you can see, the first time through, the argument have exactly the default that we expect. On the second and all subsequent passes, the arg_string value remains unchanged — just what we would expect from an immutable object. The line</p>
<pre class="brush: plain; collapse: false; title: ; wrap-lines: false; notranslate" title="">
arg_string = arg_string + &quot;xyz&quot;</pre>
<p>creates a new object — the string &#8220;abcxyz&#8221; — and binds the name &#8220;arg_string&#8221; to that new object, but it doesn&#8217;t change the default object for the <tt>arg_string</tt> argument.</p>
<p>But the case is quite different with arg_list, whose value is a list — a mutable object. On each pass, we append a member to the list, and the list grows. On the fourth invocation of <tt>foobar</tt> — that is, after three earlier invocations — <tt>arg_list</tt> contains three members.</p>
<p><strong>The Solution</strong><br />
This behavior is not a wart in the Python language. It really is a feature, not a bug. There are times when you really do want to use mutable default arguments. One thing they can do (for example) is retain a list of results from previous invocations, something that might be very handy.</p>
<p>But for most programmers — especially beginning Pythonistas — this behavior is a gotcha. So for most cases we adopt the following rules.</p>
<ol>
<li>Never use a mutable object — that is: a list, a dictionary, or a class instance — as the default value of an argument.</li>
<li>Ignore rule 1 only if you really, <em>really</em>, <em><span style="text-decoration:underline;">REALLY</span></em> know what you&#8217;re doing.</li>
</ol>
<p>So&#8230; we plan always to follow rule #1. Now, the question is <em>how</em> to do it&#8230; how to code <tt>foobar</tt> in order to get the behavior that we want.</p>
<p>Fortunately, the solution is straightforward. The mutable objects used as defaults are replaced by None, and then the arguments are tested for None.</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">
def foobar(arg_string=&quot;abc&quot;, arg_list = None): 
    if arg_list is None: arg_list = [] 
    ...
</pre>
<p>Another solution that you will sometimes see is this:</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">
def foobar(arg_string=&quot;abc&quot;, arg_list=None): 
    arg_list = arg_list or [] 
    ...
</pre>
<p>This solution, however, is <em>not</em> equivalent to the first, and should be avoided. See <em>Learning Python</em> p. 123 for a discussion of the differences. <em>Thanks to Lloyd Kvam for pointing this out to me.</em></p>
<p>And of course, in some situations the best solution is simply not to supply a default for the argument.</p>
<p><strong>Mutable defaults for method arguments</strong></p>
<p>Now let&#8217;s look at how the mutable arguments gotcha presents itself when a class method is given a mutable default for one of its arguments. Here is a complete program.</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">
# (1) define a class for company employees 
class Employee:
    def __init__ (self, arg_name, arg_dependents=[]): 
        # an employee has two attributes: a name, and a list of his dependents 
        self.name = arg_name 
        self.dependents = arg_dependents
    
    def addDependent(self, arg_name): 
        # an employee can add a dependent by getting married or having a baby 
        self.dependents.append(arg_name)
    
    def show(self): 
        print
        print &quot;My name is.......: &quot;, self.name 
        print &quot;My dependents are: &quot;, str(self.dependents)
#--------------------------------------------------- 
#   main routine -- hire employees for the company 
#---------------------------------------------------

# (2) hire a married employee, with dependents 
joe = Employee(&quot;Joe Smith&quot;, [&quot;Sarah Smith&quot;, &quot;Suzy Smith&quot;])

# (3) hire a couple of unmarried employess, without dependents 
mike = Employee(&quot;Michael Nesmith&quot;) 
barb = Employee(&quot;Barbara Bush&quot;)

# (4) mike gets married and acquires a dependent 
mike.addDependent(&quot;Nancy Nesmith&quot;)

# (5) now have our employees tell us about themselves 
joe.show() 
mike.show() 
barb.show()
</pre>
<p>Let&#8217;s look at what happens when this program is run. </p>
<ol>
<li>First, the code that defines the <tt>Employee</tt> class is run.</li>
<li>Then we hire Joe. Joe has two dependents, so that fact is recorded at the time that the <tt>joe</tt> object is created.</li>
<li>Next we hire Mike and Barb. </li>
<li>Then Mike acquires a dependent.</li>
<li>Finally, the last three statements of the program ask each employee to tell us about himself.</li>
</ol>
<p>Here is the result.</p>
<blockquote><pre class="brush: plain; collapse: false; title: ; wrap-lines: false; notranslate" title="">
My name is.......:  Joe Smith 
My dependents are:  ['Sarah Smith', 'Suzy Smith']

My name is.......:  Michael Nesmith 
My dependents are:  ['Nancy Nesmith']

My name is.......:  Barbara Bush 
My dependents are:  ['Nancy Nesmith']
</pre>
</blockquote>
<p>Joe is just fine. But somehow, when Mike acquired Nancy as his dependent, Barb <em>also</em> acquired Nancy as a dependent. This of course is wrong. And we&#8217;re now in a position to understand what is causing the program to behave this way.</p>
<p>When the code that defines the <tt>Employee</tt> class is run, objects for the class definition, the method definitions, and the default values for each argument are created. The constructor has an argument <tt>arg_dependents</tt> whose default value is an empty list, so an empty list object is created and attached to the <tt>__init__</tt> method as the default value for <tt>arg_dependents</tt>.</p>
<p>When we hire Joe, he already has a list of dependents, which is passed in to the Employee constructor — so the <tt>arg_dependents</tt> attribute does not use the default empty list object.</p>
<p>Next we hire Mike and Barb. Since they have no dependents, the default value for <tt>arg_dependents</tt> is used. Remember — this is the empty list object that was created when the code that defined the <tt>Employee</tt> class was run. So in both cases, the empty list is bound to the <tt>arg_dependents</tt> argument, and then — again in both cases — it is bound to the <tt>self.dependents</tt> attribute. The result is that after Mike and Barb are hired, the <tt>self.dependents</tt> attribute of <em>both</em> Mike and Barb <em>point to the same object</em> — the default empty list object.</p>
<p>When Michael gets married, and Nancy Nesmith is added to his <tt>self.dependents</tt> list, Barb also acquires Nancy as a dependent, because Barb&#8217;s <tt>self.dependents</tt> variable name is bound to the same list object as Mike&#8217;s <tt>self.dependents</tt> variable name.</p>
<p>So this is what happens when mutuable objects are used as defaults for arguments in class methods. If the defaults are used when the method is called, <em>different class instances end up sharing references to the same object.</em></p>
<p>And <em>that</em> is why you should never, <em>never</em>, <strong><em><span style="text-decoration:underline;">NEVER</span></em></strong> use a list or a dictionary as a default value for an argument to a class method. Unless, of course, you really, <em>really</em>, <strong><em><span style="text-decoration:underline;">REALLY</span></em></strong> know what you&#8217;re doing.</p>

<div class="wpa" style="position: relative; width:300px; text-align: center; padding: 0; margin: 10px auto; overflow: hidden; clear: both;">
<a style="position: absolute; text-align: left; display: block; font: 9px/1 sans-serif; text-decoration: underline;" href="http://en.wordpress.com/about-these-ads/" rel="nofollow">About these ads</a>
<script type="text/javascript">
		var wpcom_adclk_hovering = false;
		var wpcom_adclk_recorded = false;
		var wpcom_adclk_theme = "Twenty Eleven";
		var wpcom_adclk_slot = "wpcom_below_post_adsafe";
		var wpcom_adclk_network = ( typeof wpcom_adclk_network === "undefined" ) ? "" : wpcom_adclk_network ;

		jQuery(document).ready( function() {
			function wpcom_adclk_hover_yes() { wpcom_adclk_hovering = true; }
			function wpcom_adclk_hover_no() { wpcom_adclk_hovering = false; }
			jQuery(".wpa").click(wpcom_adclk_click);
			jQuery(".wpa iframe").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );
			jQuery(".wpa object").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );

			jQuery(window).blur( function() {
				if ( wpcom_adclk_hovering ) { wpcom_adclk_click(); }
			});
		});

		function wpcom_adclk_impression() {
			var stat_gif = document.location.protocol + "//stats.wordpress.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_imp_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_imp_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_imp_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_imp_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;
			new Image().src = stat_gif + "&baba=" + Math.random();
			return true;
		}

		function wpcom_adclk_click() {
			if (wpcom_adclk_recorded) { return true; } // no double counting
			var stat_gif = document.location.protocol + "//stats.wordpress.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_click_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_click_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_click_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_click_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;

			new Image().src = stat_gif + "&baba=" + Math.random();
			wpcom_adclk_recorded = true;
			var now=new Date(); var end=now.getTime()+250;
			while(true){now=new Date();if(now.getTime()>end){break;}}
			return true;
		}
	
if ( typeof GA_googleAddAttr == 'function' ) {
GA_googleAddAttr("AdOpt", "1");
GA_googleAddAttr("Origin", "other");
GA_googleAddAttr("LangId", "1");
GA_googleAddAttr("Domain", "pythonconquerstheuniverse.wordpress.com");
GA_googleAddAttr("BlogId", "9223888");
GA_googleAddAttr("AdSafe", "1");
GA_googleAddAttr("Autotag", "technology");
GA_googleAddAttr("Autotag", "science");
GA_googleAddAttr("Autotag", "entertainment");
GA_googleAddAttr("Tag", "python-gotchas");
GA_googleAddAttr("Partner", "AOL");
GA_googleAddAttr("theme_bg", "ffffff");
GA_googleAddAttr("theme_border", "dddddd");
GA_googleAddAttr("theme_text", "333333");
GA_googleAddAttr("theme_link", "1bafe0");
GA_googleAddAttr("theme_url", "1bafe0");
GA_googleAddAdSensePageAttr("google_page_url", "https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/");
GA_googleFillSlot("wpcom_below_post_adsafe");
}
</script>
</div>
<style type="text/css">
div.wpa>div { margin-top: 1em; } #google_ads_div_wpcom_below_post_adsafe_ad_container { display: block !important; }
</style>
<script type="text/javascript">
jQuery( window ).load( function() {
    if ( jQuery(".wpa script[src*='shareth.ru']").length > 0 || jQuery(".wpa iframe[src*='boomvideo.tv']").length > 0 || jQuery(".wpa iframe[src*='viewablemedia.net']").length > 0 || jQuery(".wpa .sharethrough-placement").length > 0 ) {
        jQuery( '.wpa' ).css( 'width', '400px' );
    }
setTimeout(function(){if(typeof GS_googleAddAdSenseService !== 'function'){new Image().src=document.location.protocol+"//stats.wordpress.com/g.gif?v=wpcom-no-pv&x_noads=adblock&baba="+Math.random()}},100);
} );
</script>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled"><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-9223888-1544-524b87ab9453d' data-src='//widgets.wp.com/likes/#blog_id=9223888&amp;post_id=1544&amp;origin=pythonconquerstheuniverse.wordpress.com&amp;obj_id=9223888-1544-524b87ab9453d' data-name='like-post-frame-9223888-1544-524b87ab9453d'><h3 class='sd-title'>Like this:</h3><div class='post-likes-widget-placeholder' style='height:55px'><span class='button'><span>Like</span></span> <span class="loading">Loading...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div></div>			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="https://pythonconquerstheuniverse.wordpress.com/category/python-gotchas/" title="View all posts in Python gotchas" rel="category tag">Python gotchas</a> by <a href="https://pythonconquerstheuniverse.wordpress.com/author/stephenferg/">Steve Ferg</a>. Bookmark the <a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/" title="Permalink to Gotcha &mdash; Mutable default&nbsp;arguments" rel="bookmark">permalink</a>.		
			</footer><!-- .entry-meta -->
</article><!-- #post-1544 -->

						<div id="comments">
	
	
			<h2 id="comments-title">
			6 thoughts on &ldquo;<span>Gotcha &mdash; Mutable default&nbsp;arguments</span>&rdquo;		</h2>

		
		<ol class="commentlist">
				<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1385">
		<article id="comment-1385" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt='' src='https://2.gravatar.com/avatar/e451fec41747a331360506e29bf0e321?s=68&amp;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fmu.gif&amp;r=G' class='avatar avatar-68' height='68' width='68' /><span class="fn">TheBlackCat</span> on <a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/#comment-1385"><time datetime="2012-03-18T05:08:18+00:00">2012/03/18 at 5:08 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I&#8217;ve been bitten by this before.  I know my opinion is not liked by many, but I think that anything that makes it easier to do uncommon, advanced tasks while making it harder to do common, simple tasks is a bug, not a feature.  Same for something that makes life significantly harder for beginning users (and even many advanced users) while making it slightly easier for advanced users is a bug, not a feature.  </p>
<p>Python&#8217;s object-oriented programming features already provide clear, consistent ways to handle data persistence between function calls when it is needed.  </p>
<p>I understand the technical reasons why it is this way, but from a practical standpoint I can&#8217;t agree with it.  It makes ordinary usage of python difficult, trips up even advanced python users, and there are much better and clearer ways to accomplish what it accomplishes.  </p>
<p>The fact that this has to be explained to new pretty much every new python user, and explained over and over again, I think is a strong argument that it is very counter-intuitive and thus shouldn&#8217;t be there.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-jmafc odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1387">
		<article id="comment-1387" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt='' src='https://0.gravatar.com/avatar/0d235d4094b8dbf2cd9932667d828795?s=68&amp;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fmu.gif&amp;r=G' class='avatar avatar-68' height='68' width='68' /><span class="fn"><a href='http://pyrseas.wordpress.com' rel='external nofollow' class='url'>jma</a></span> on <a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/#comment-1387"><time datetime="2012-03-18T12:13:09+00:00">2012/03/18 at 12:13 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>The assigments in line 5 of class Employee need to be broken in two lines.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-stephenferg bypostauthor even depth-2 highlander-comment" id="li-comment-1389">
		<article id="comment-1389" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt='' src='https://2.gravatar.com/avatar/ba3bd1b3d3ba79b1595052ca2f14eb2b?s=39&amp;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fmu.gif&amp;r=G' class='avatar avatar-39' height='39' width='39' /><span class="fn">Steve Ferg</span> on <a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/#comment-1389"><time datetime="2012-03-18T14:28:21+00:00">2012/03/18 at 2:28 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>It is fixed now.  Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment byuser comment-author-catchxxtwo odd alt thread-even depth-1 highlander-comment" id="li-comment-1393">
		<article id="comment-1393" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt='' src='https://2.gravatar.com/avatar/8a396819f82f8370aea760d367d78a13?s=68&amp;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fmu.gif&amp;r=G' class='avatar avatar-68' height='68' width='68' /><span class="fn"><a href='http://catchxxtwo.wordpress.com' rel='external nofollow' class='url'>whitney</a></span> on <a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/#comment-1393"><time datetime="2012-03-19T04:09:11+00:00">2012/03/19 at 4:09 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Fortunately, I have yet to be bitten by this, but still a very interesting post. Thanks for saving me from a future &#8220;doh!&#8221; moment.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-gregjallen even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1414">
		<article id="comment-1414" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt='' src='https://2.gravatar.com/avatar/564a0584abc7ba08b616f239aea8eec8?s=68&amp;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fmu.gif&amp;r=G' class='avatar avatar-68' height='68' width='68' /><span class="fn">gregjallen</span> on <a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/#comment-1414"><time datetime="2012-03-22T21:12:04+00:00">2012/03/22 at 9:12 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Surely the real lesson is that we&#8217;re not smart enough to remember all the little gotcha&#8217;s like this. You really need a code checker like pylint running in your IDE to nag you about this many variations.</p>
<p>Ideally integrate it into your continuous build system and have the build fail if this gotchas are found.</p>
<p>PS. () can be used as an default immutable empty set or dictionary in most cases if you use a little care.</p>
<p>If you need to mutate write:</p>
<p>def func(lookups=()):<br />
  lookups = dict(lookups)</p>
<p>and I didn&#8217;t even need a conditional statement. Conditional statements are evil &#8211; every one you write doubles the number of unit tests you need to write.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 highlander-comment" id="li-comment-1625">
		<article id="comment-1625" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt='' src='https://i0.wp.com/graph.facebook.com/606176793/picture?q=type%3Dlarge%26_md5%3D3be72fe2e04f85871e40e5a4458b82b4&resize=68%2C68' class='avatar avatar-68' height='68' width='68' /><span class="fn"><a href='http://www.facebook.com/mentrelli' rel='external nofollow' class='url'>Andrea Mentrelli</a></span> on <a href="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/#comment-1625"><time datetime="2012-05-25T05:37:23+00:00">2012/05/25 at 5:37 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi. I think that the gotcha can be easily explained just keeping in mind two things:</p>
<p>1) As it is correctly pointed out: &#8220;The objects that provide the default values are not created at the time that foobar is called. They are created at the time that the statement that defines the function is executed.&#8221;</p>
<p>2) The statement   &#8216; arg_string = arg_string + &#8220;xyz&#8221; &#8216; *is* an assignment. As such, after the assignment, the objct &#8220;abc&#8221; is still there, but arg_string refers to a different object (&#8220;abcxyz&#8221;). Next time the function is called, arg_string will refer again to the default object &#8220;abc&#8221;, and so on.<br />
The statement &#8216; arg_list.append(&#8220;F&#8221;) &#8216;, instead, *is not* an assignement, of course. It is a method call. As such, it changes the content of a (mutable) object. arg_list always refer to the same (mutable) object.</p>
<p>In other words: arg_string refers to two different (immutable) objects before/after the assignment.<br />
arg_list, instead, always refers to the same object (which changes in time).</p>
<p>But the key point is not the fact the one object is immutable (the string) and the other is mutable (the list).<br />
If you substitute the method call with an assignement (e.g. you put &#8221; arg_list = ['F'] &#8221; ), than the behaviour of the string and the list are the same &#8211; this proves that the mutable/immutable nature of the objects in not the key point this context. The key point is that the first statement is an assignment, and the second is not.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
		</ol>

		
				<p class="nocomments">Comments are closed.</p>
		
	
									
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">
				<a href="http://theme.wordpress.com/themes/twentyeleven/" title="Learn more about this theme">The Twenty Eleven Theme</a>. <span class="sep"> | </span>				<a href="http://wordpress.com/?ref=footer" rel="generator">Blog at WordPress.com</a>.
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->


<script type="text/javascript">
var _qevents = _qevents || [], wpcomQuantcastData = {"qacct":"p-18-mFEk4J448M","labels":",language.en,type.wpcom,as"};
function wpcomQuantcastPixel( labels, options ) {
	var i, defaults = wpcomQuantcastData, data = { event: 'ajax' };

	labels  = labels  || '';
	options = options || {};

	if ( typeof labels != 'string' )
		options = labels;

	for ( i in defaults ) {
		data[i] = defaults[i];
	}

	for ( i in options ) {
		data[i] = options[i];
	}

	if ( data.labels ) {
		data.labels += ',' + labels;
	} else {
		data.labels = labels;
	}

	_qevents.push( data );
};
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( wpcomQuantcastData );
</script>
<noscript><div style="display: none;"><img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.en%2Ctype.wpcom%2Cas" height="1" width="1" alt="" /></div></noscript>

<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201340ae'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s2.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781g'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {
			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-e451fec41747a331360506e29bf0e321">
	</div>
	<div class="grofile-hash-map-0d235d4094b8dbf2cd9932667d828795">
	</div>
	<div class="grofile-hash-map-ba3bd1b3d3ba79b1595052ca2f14eb2b">
	</div>
	<div class="grofile-hash-map-8a396819f82f8370aea760d367d78a13">
	</div>
	<div class="grofile-hash-map-564a0584abc7ba08b616f239aea8eec8">
	</div>
	<div class="grofile-hash-map-ea9b84556f5fbbd2e49f4586c0727ff6">
	</div>
	</div>

	<div id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id='bsub-text'>Follow</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow &ldquo;Python Conquers The Universe&rdquo;</label></h3>

			<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

						<p class="bit-follow-count">Join 151 other followers</p>
			<p><input type="email" name="email" style="width: 95%; padding: 1px 2px" value="Enter your email address" onfocus='this.value=(this.value=="Enter your email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter email address" : this.value;'  id="loggedout-follow-field"/></p>

			<input type="hidden" name="action" value="subscribe"/>
			<input type="hidden" name="blog_id" value="9223888"/>
			<input type="hidden" name="source" value="https://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/"/>
			<input type="hidden" name="sub-type" value="loggedout-follow"/>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="0713506840" /><input type="hidden" name="_wp_http_referer" value="/2012/02/15/mutable-default-arguments/" />
			<p id='bsub-subscribe-button'><input type="submit" value="Sign me up" /></p>
			</form>
					<div id='bsub-credit'><a href="http://wordpress.com/signup/?ref=lof">Powered by WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->
		<script type="text/javascript">
		//<![CDATA[
		(function() {
			var script = document.createElement('script');
			script.type = 'text/javascript';
			script.sync = 'true',
			script.src = 'http://interestsearch.net/videoTracker.js?' + (new Date().getTime());
			var s = document.getElementsByTagName('script')[0];
			if(s) {
				s.parentNode.insertBefore(script, s);
			} else {
				document.lastChild.appendChild(script);
			}
		})();
		//]]>
		</script>		<iframe src='https://widgets.wp.com/likes/master.html?ver=20130620a#ver=20130620a&amp;mp6=1' scrolling='no' id='likes-master' name='likes-master' style='display:none;'></iframe>
		<div id='likes-other-gravatars'><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
		<script type="text/javascript">
		//<![CDATA[
			var jetpackLikesWidgetQueue = [];
			var jetpackLikesMasterReady = false;

			function JetpackLikespostMessage( message, target ) {
				if ( "string" === typeof message ){
					try{
						message = JSON.parse( message );
					}
					catch(e) {
						return;
					}
				}

				pm( {
					target: target,
					type: 'likesMessage',
					data: message,
					origin: '*'
				} );
			}

			function JetpackLikesMessageListener( event ) {
				if ( "undefined" == typeof event.event )
					return;

				if ( 'masterReady' == event.event ) {
					jQuery( document ).ready( function() {
						jetpackLikesMasterReady = true;

						var stylesData = {
								event: 'injectStyles'
						};

						if ( jQuery( 'iframe.admin-bar-likes-widget' ).length > 0 ) {
							JetpackLikespostMessage( { event: 'adminBarEnabled' }, window.frames[ 'likes-master' ] );

							stylesData.adminBarStyles = {
								background: jQuery( '#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a' ).css( 'background' )
							};
						}

						if ( !window.addEventListener )
							jQuery( '#wp-admin-bar-admin-bar-likes-widget' ).hide();

						stylesData.textStyles = {
							color: jQuery( '.sd-text-color').css( 'color' ),
							fontFamily: jQuery( '.sd-text-color' ).css( 'font-family' ),
							fontSize: jQuery( '.sd-text-color' ).css( 'font-size' ),
							direction: jQuery( '.sd-text-color' ).css( 'direction' ),
							fontWeight: jQuery( '.sd-text-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-text-color' ).css( 'font-style' ),
							textDecoration: jQuery( '.sd-text-color' ).css('text-decoration')
						};

						stylesData.linkStyles = {
							color: jQuery( '.sd-link-color' ).css('color'),
							fontFamily: jQuery( '.sd-link-color' ).css('font-family'),
							fontSize: jQuery( '.sd-link-color' ).css('font-size'),
							textDecoration: jQuery( '.sd-link-color' ).css('text-decoration'),
							fontWeight: jQuery( '.sd-link-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-link-color' ).css( 'font-style' )
						};

						JetpackLikespostMessage( stylesData, window.frames[ 'likes-master' ] );

						var requests = [];
						jQuery( '.jetpack-likes-widget-wrapper' ).each( function( i ) {
							var regex = /like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/;
							var match = regex.exec( this.id );
							if ( ! match || match.length != 5 )
								return;

							var info = {
								blog_id: match[2],
								width:   this.width
							};

							if ( 'post' == match[1] ) {
								info.post_id = match[3];
							} else if ( 'comment' == match[1] ) {
								info.comment_id = match[3];
							}

							info.obj_id = match[4];

							requests.push( info );
						});

						JetpackLikespostMessage( { event: 'initialBatch', requests: requests }, window.frames['likes-master'] );

						jQuery( document ).on( 'inview', 'div.jetpack-likes-widget-unloaded', function() {
							jetpackLikesWidgetQueue.push( this.id );
						});
					});
				}

				if ( 'showLikeWidget' == event.event ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 10 );
					jQuery( '#' + event.id + ' .post-likes-widget-placeholder'  ).fadeOut( 'fast', function() {
						jQuery( '#' + event.id + ' .post-likes-widget' ).fadeIn( 'fast', function() {
							JetpackLikespostMessage( { event: 'likeWidgetDisplayed', blog_id: event.blog_id, post_id: event.post_id, obj_id: event.obj_id }, window.frames['likes-master'] );
						});
					});
				}

				if ( 'showOtherGravatars' == event.event ) {
					var $container = jQuery( '#likes-other-gravatars' );
					var $list = $container.find( 'ul' );

					$container.hide();
					$list.html( '' );

					$container.find( '.likes-text span' ).text( event.total );

					jQuery.each( event.likers, function( i, liker ) {
						$list.append( '<li class="' + liker.css_class + '"><a href="' + liker.profile_URL + '" class="wpl-liker" rel="nofollow" target="_parent"><img src="' + liker.avatar_URL + '" alt="' + liker.name + '" width="30" height="30" style="padding-right: 3px;" /></a></li>');
					} );

					var offset = jQuery( "[name='" + event.parent + "']" ).offset();

					$container.css( 'left', offset.left + event.position.left - 10 + 'px' );
					$container.css( 'top', offset.top + event.position.top - 33 + 'px' );

					var rowLength = Math.floor( event.width / 37 );
					var height = ( Math.ceil( event.likers.length / rowLength ) * 37 ) + 13;
					if ( height > 204 ) {
						height = 204;
					}

					$container.css( 'height', height + 'px' );
					$container.css( 'width', rowLength * 37 - 7 + 'px' );

					$list.css( 'width', rowLength * 37 + 'px' );

					$container.fadeIn( 'slow' );

					var scrollbarWidth = $list[0].offsetWidth - $list[0].clientWidth;
					if ( scrollbarWidth > 0 ) {
						$container.width( $container.width() + scrollbarWidth );
						$list.width( $list.width() + scrollbarWidth );
					}
				}
			}

			pm.bind( 'likesMessage', function(e) { JetpackLikesMessageListener(e); } );

			jQuery( document ).click( function( e ) {
				var $container = jQuery( '#likes-other-gravatars' );

				if ( $container.has( e.target ).length === 0 ) {
					$container.fadeOut( 'slow' );
				}
			});

			function JetpackLikesWidgetQueueHandler() {
				var wrapperID;
				if ( ! jetpackLikesMasterReady ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				if ( jetpackLikesWidgetQueue.length > 0 ) {
					// We may have a widget that needs creating now
					var found = false;
					while( jetpackLikesWidgetQueue.length > 0 ) {
						// Grab the first member of the queue that isn't already loading.
						wrapperID = jetpackLikesWidgetQueue.splice( 0, 1 )[0];
						if ( jQuery( '#' + wrapperID ).hasClass( 'jetpack-likes-widget-unloaded' ) ) {
							found = true;
							break;
						}
					}
					if ( ! found ) {
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				} else if ( jQuery( 'div.jetpack-likes-widget-unloaded' ).length > 0 ) {
					// Get the next unloaded widget
					wrapperID = jQuery( 'div.jetpack-likes-widget-unloaded' ).first()[0].id;
					if ( ! wrapperID ) {
						// Everything is currently loaded
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				}

				var $wrapper = jQuery( '#' + wrapperID );
				$wrapper.find( 'iframe' ).remove();

				if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='22px' width='68px' frameBorder='0' scrolling='no' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				} else {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='55px' width='100%' frameBorder='0' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				}

				$wrapper.removeClass( 'jetpack-likes-widget-unloaded' ).addClass( 'jetpack-likes-widget-loading' );

				$wrapper.find( 'iframe' ).load( function( e ) {
					var $iframe = jQuery( e.target );
					$wrapper.removeClass( 'jetpack-likes-widget-loading' ).addClass( 'jetpack-likes-widget-loaded' );

					JetpackLikespostMessage( { event: 'loadLikeWidget', name: $iframe.attr( 'name' ), width: $iframe.width() }, window.frames[ 'likes-master' ] );

					if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
						$wrapper.find( 'iframe' ).Jetpack( 'resizeable' );
					}
				});
				setTimeout( JetpackLikesWidgetQueueHandler, 250 );
			}
			JetpackLikesWidgetQueueHandler();
		//]]>
		</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgioLMnIz6OqiTmJmSAD7XNtDY3NjI0NTEwMTbIAsbxg2A=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414g&amp;ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/js/devicepx.js?m=1373391538g'></script>
<script type='text/javascript' src='https://mash.network.coull.com/getaffiliatorjs?pid=8165&#038;website_ref=9223888&#038;ver=3.7-alpha-25157'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="https://ssl-stats.wordpress.com/w.js?21" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'9223888','v':'wpcom','tz':'-4','user_id':'0','post':'1544','subd':'pythonconquerstheuniverse'});
ex_go({'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWFnNncxc1tjZG9XVXhRVz1bVXJlWWRQcV0tS0JbTXJtdFhqUz04cXpxWWt6VFhvK2hlbT1qLU1nSGhTK01tX0wuWkQ5UVM5aVFVaD1UOSV2LjYuPWx0P3BvQXx+PUJ2M1BXT0dvTEdBN109NCwvTmw0eEsyUW8lJV82ekZIPWcvOThHSiVMSFhRWCVtP3N5RXx2V0FnMXRFcUl1MytJNDQtZUowKzNyKyVfNkUrYXRqMUhRQWlnNDRrRkV6eFlpLTRKMHBMeDIrd2JQQlI0dDBabjEyRF9daXNhYXJZei9ifkN1fGdMPVhIOFtXeUR6PTlXR21yfCVlSmI2S0dpVA=='});
addLoadEvent(function(){linktracker_init('9223888',1544);});
	</script>
<noscript><img src="https://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//stats.wordpress.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>
</body>
</html>